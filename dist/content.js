(()=>{"use strict";console.log("LinkedIn Profile Harvester content script loaded");const e="linkedin-harvester-enqueue-btn",t=new Set;function n(){console.log("Initializing LinkedIn Profile Harvester on:",window.location.href),o(),new MutationObserver(()=>{o()}).observe(document.body,{childList:!0,subtree:!0}),console.log("Content script initialized, monitoring for profile links")}function o(){document.querySelectorAll('a[href*="/in/"]').forEach(n=>{const o=n.href;(function(e){try{const t=new URL(e);return("www.linkedin.com"===t.hostname||"linkedin.com"===t.hostname)&&t.pathname.startsWith("/in/")&&!t.pathname.includes("/posts/")&&!t.pathname.includes("/detail/")}catch{return!1}})(o)&&!t.has(o)&&(t.add(o),function(e){e.setAttribute("style","border: 2px solid #0077B5; border-radius: 4px; padding: 2px; background-color: #E7F3FF;")}(n),function(t){const n=t.parentElement?.querySelector(`.${e}`);if(n)return;const o=document.createElement("button");o.className=e,o.textContent="+ Harvest",o.style.cssText="\n    margin-left: 8px;\n    padding: 4px 8px;\n    background-color: #0077B5;\n    color: white;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    font-size: 12px;\n    font-weight: bold;\n  ",o.addEventListener("mouseenter",()=>{o.style.backgroundColor="#005582"}),o.addEventListener("mouseleave",()=>{o.style.backgroundColor="#0077B5"}),o.addEventListener("click",async e=>{e.preventDefault(),e.stopPropagation();const n=t.href;o.disabled=!0,o.textContent="Adding...";try{const e=await chrome.runtime.sendMessage({type:"ENQUEUE_PROFILE",url:n});if(!e.success)throw new Error(e.message||"Failed to enqueue");o.textContent=e.added?"✓ Added":"✓ Already in Queue",o.style.backgroundColor="#057642",setTimeout(()=>{o.textContent="+ Harvest",o.style.backgroundColor="#0077B5",o.disabled=!1},2e3)}catch(e){console.error("Error enqueueing profile:",e),o.textContent="✗ Error",o.style.backgroundColor="#cc0000",setTimeout(()=>{o.textContent="+ Harvest",o.style.backgroundColor="#0077B5",o.disabled=!1},2e3)}}),t.parentElement&&t.parentElement.insertBefore(o,t.nextSibling)}(n))})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()})();